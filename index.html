<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSFiddle Clone</title>
    <style>
        body {
            display: flex;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }
        #sidebar {
            width: 200px;
            background-color: #333;
            color: #fff;
            display: flex;
            flex-direction: column;
            padding: 10px;
        }
        #sidebar h2 {
            margin: 0;
            padding: 10px 0;
            font-size: 18px;
        }
        #sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        #sidebar li {
            padding: 10px;
            cursor: pointer;
        }
        #sidebar li:hover {
            background-color: #444;
        }
        #editor {
            display: flex;
            flex-direction: column;
            width: 100%;
            padding: 10px;
        }
        textarea {
            width: 100%;
            height: 300px;
            margin: 5px 0;
            padding: 10px;
            box-sizing: border-box;
            font-family: monospace;
            border: 1px solid #ccc;
            background-color: #fff;
            resize: none;
        }
        iframe {
            width: 100%;
            height: 500px;
            border: 1px solid #ccc;
            background-color: #fff;
        }
        #controls {
            margin-bottom: 20px;
        }
        #controls label, #controls select, #controls button {
            font-size: 16px;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div id="sidebar">
        <h2>Files</h2>
        <ul id="file-list">
            <li data-file="index.html">index.html</li>
            <li data-file="style.css">style.css</li>
            <li data-file="script.js">script.js</li>
        </ul>
        <button id="create-file">Create New File</button>
    </div>
    <div id="editor">
        <div id="controls">
            <label for="js-preprocessor">JavaScript Preprocessor:</label>
            <select id="js-preprocessor">
                <option value="none">None</option>
                <option value="typescript">TypeScript</option>
            </select>
            <label for="css-preprocessor">CSS Preprocessor:</label>
            <select id="css-preprocessor">
                <option value="none">None</option>
                <option value="scss">SCSS</option>
            </select>
            <button id="preview-button">Preview</button>
        </div>
        <textarea id="file-content" placeholder="File content will appear here..."></textarea>
<iframe id="preview" name="preview"></iframe>
    </div>
    <script>
document.addEventListener('DOMContentLoaded', () => {
    const files = {
        'index.html': '<h1>Welcome to Index</h1>',
        'style.css': 'body { font-family: Arial; }',
        'script.js': 'console.log("Hello, world!");'
    };

    const fileList = document.getElementById('file-list');
    const previewFrame = document.getElementById('preview');

    let currentFile = 'index.html';

    const updateSidebar = () => {
        fileList.innerHTML = '';
        Object.keys(files).forEach(file => {
            const li = document.createElement('li');
            li.textContent = file;
            li.dataset.file = file;
            li.addEventListener('click', () => {
                currentFile = li.dataset.file;
                updatePreview();
            });
            fileList.appendChild(li);
        });
    };

    const updatePreview = () => {
        const completeContent = generatePreviewContent();
        const previewDocument = previewFrame.contentDocument || previewFrame.contentWindow.document;
        previewDocument.open();
        previewDocument.write(completeContent);
        previewDocument.close();
    };

    const generatePreviewContent = () => {
        const html = files['index.html'];
        const css = `<style>${files['style.css']}</style>`;
        const js =  `<script>${files['script.js']}</sript>`;
        return `
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Preview</title>
                ${css}
            </head>
            <body>
                ${html}
                ${js}
            </body>
            </html>
        `;
    };

    previewFrame.onload = function() {
        const iframeDocument = previewFrame.contentDocument || previewFrame.contentWindow.document;
        const links = iframeDocument.querySelectorAll('a');
        links.forEach(link => {
            link.addEventListener('click', (event) => {
                event.preventDefault(); // Prevent default navigation behavior
                const href = link.getAttribute('href');
                if (files[href]) {
                    currentFile = href;
                    updatePreview(); // Update preview with the content of the clicked file
                } else {
                    console.error(`File "${href}" not found.`);
                }
            });
        });
    };

    updatePreview();
    updateSidebar();
});

    </script>
</body>
</html>
